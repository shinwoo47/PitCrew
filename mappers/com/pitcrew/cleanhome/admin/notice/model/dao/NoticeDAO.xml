<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper	namespace="NoticeDAO">
	<resultMap type="com.pitcrew.cleanhome.admin.notice.model.dto.NoticeDTO" id="noticeResultMap">
	<id property="no" column="BOARD_NO"/>
	<result property="title" column="BOARD_TITLE"/>
	<result property="content" column="BOARD_BODY"/>
	<result property="category" column="BOARD_CATEGORY"/>
	<result property="writeDate" column="BOARD_WRITE_DATE"/>
	<result property="writerMemberNo" column="MEM_NO"/>
	<result property="status" column="BOARD_CON"/>
	<result property="count" column="BOARD_READ_COUNT"/>

	<association property="writer" resultMap="memberResultMap"/>
	<association property="role" resultMap="memberResultMap"/>
	</resultMap>
	
	<resultMap type="com.pitcrew.cleanhome.admin.member.model.dto.MemberDTO" id="memberResultMap">
	<id property="memNo" column="MEM_NO"/>
	<result property="name" column="MEM_NAME"/>
	<result property="id" column="MEM_ID"/>
	<result property="email" column="EMAIL"/>
	<result property="bday" column="BIRTH"/>
	<result property="address" column="ADDRESS"/>
	<result property="pwd" column="MEM_PWD"/>
	<result property="phone" column="PHONE"/>
	<result property="enrollDate" column="ENROLL_DATE"/>
	<result property="role" column="MEMBER_ROLE"/>
	<result property="status" column="ENT_YN"/>
	<result property="entireDate" column="ENT_DATE"/>
	</resultMap>
	
	<select id="selectAllNoticeList" resultMap="noticeResultMap">
		SELECT /**/
		        A.BOARD_NO
		      , A.BOARD_TITLE
		      , A.BOARD_BODY
		      , A.BOARD_CATEGORY
		      , A.BOARD_WRITE_DATE
		      , A.MEM_NO
		      , B.MEM_NAME
		      , A.BOARD_CON
		      , A.BOARD_READ_COUNT
		      , B.MEMBER_ROLE
		 FROM BOARD A
		 JOIN MEMBER B ON (A.WRITER = B.MEM_NAME)
		WHERE A.BOARD_CON = 'Y'
	      AND A.BOARD_CATEGORY = '공지'
	    ORDER BY A.BOARD_WRITE_DATE DESC
	</select>
</mapper>